(this.webpackJsonpdatabase=this.webpackJsonpdatabase||[]).push([[0],{198:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(26),c=a.n(i),r=(a(88),a(15)),o=a(13),l=(a(89),a(34),a(8)),d=a(9),u=a(3),b=a(11),j=a(10),h=a(0),m=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"logout",value:function(e){localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("subject"),window.location="/"}},{key:"render",value:function(){var e,t,a=localStorage.getItem("username");return localStorage.getItem("token")?(e="Logout",t=""):(e="Login",t="Sign up"),Object(h.jsxs)("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg",children:[Object(h.jsx)(r.b,{to:"/",className:"navbar-brand",onClick:this.logout,children:e}),Object(h.jsx)("div",{className:"collpase navbar-collapse",children:Object(h.jsxs)("ul",{className:"navbar-nav mr-auto",children:[""===t?Object(h.jsx)("li",{className:"navbar-item",children:Object(h.jsxs)("h6",{children:["Welcome back, ",a]})}):Object(h.jsx)("li",{className:"navbar-item",children:Object(h.jsx)(r.b,{to:"/user/create",className:"nav-link",children:t})}),Object(h.jsx)("li",{className:"navbar-item",children:Object(h.jsx)(r.b,{to:"/dashboard",className:"nav-link",children:"Dashboard"})})]})})]})}}]),a}(n.Component),g=a(5),O=a.n(g),p=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeEmail=n.onChangeEmail.bind(Object(u.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n.state={users:[],pass:!1,email:"",password:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){var a=t.data;e.setState({users:a})}))}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value}),this.state.users.map((function(e){return e.email})).includes(e.target.value)&&this.setState({pass:!0})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.pass){var a={email:this.state.email,password:this.state.password};O.a.get("/api/users").then((function(e){var a=e.data.filter((function(e){return e.email===t.state.email}));localStorage.setItem("username",a[0].username)})),O.a.post("/api/users/login",a).then((function(e){localStorage.setItem("token",e.data.token),window.location="/dashboard"})).catch((function(e){document.getElementById("submit").innerHTML="Password is wrong."}))}else document.getElementById("submit").innerHTML="Email is wrong"}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("h3",{children:"Login"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.email,onChange:this.onChangeEmail})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary"}),Object(h.jsx)("p",{id:"submit",style:{color:"red"}})]})]})]})}}]),a}(n.Component),f={headers:{"auth-token":localStorage.getItem("token")}},x=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[],username:"",email:"",password:"",pass:!1},n.onChangeUsername=n.onChangeUsername.bind(Object(u.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(u.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){var a=t.data;e.setState({users:a})}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value}),this.state.users.map((function(e){return e.email})).includes(e.target.value)?(this.setState({pass:!1}),document.getElementById("email").innerHTML=" \xd7 "):(this.setState({pass:!0}),document.getElementById("email").innerHTML="")}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.state.pass){var t={username:this.state.username,email:this.state.email,password:this.state.password};O.a.post("/api/users/add",t,f).then((function(e){return console.log(e.data)})),window.location="/"}else document.getElementById("submit").innerHTML="Email has been taken."}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New User"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email: "}),Object(h.jsx)("a",{id:"email",style:{color:"red"}}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.email,onChange:this.onChangeEmail})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{type:"submit",value:"Create New User",className:"btn btn-primary"}),Object(h.jsx)("p",{id:"submit",style:{color:"red"}})]})]})]})}}]),a}(n.Component),v={headers:{"auth-token":localStorage.getItem("token")}},S=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={subjects:[],subjectClicked:"",details:[],sorted:!1,photo:[]},n.subjectClicked=n.subjectClicked.bind(Object(u.a)(n)),n.sort=n.sort.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"arrayBufferToBase64",value:function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}},{key:"subjectClicked",value:function(e){this.setState({subjectClicked:e.target.innerText}),localStorage.setItem("subject",e.target.innerText)}},{key:"deleteDetail",value:function(e,t,a){e.preventDefault(),O.a.delete("/api/dashboard/details/"+t,v).then((function(e){return console.log(e.data)})),O.a.delete("/api/dashboard/img_data/"+a,v).then((function(e){return console.log(e.data)})),this.setState({details:this.state.details.filter((function(e){return e._id!==t})),photo:this.state.photo.filter((function(e){return e._id!==a}))})}},{key:"sort",value:function(e){var t=this,a=this.state.details.sort((function(e,a){return!0===t.state.sorted?e.date>a.date?1:-1:e.date>a.date?-1:1}));this.setState({details:a,sorted:!this.state.sorted})}},{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/dashboard/subjects",v).then((function(t){var a=t.data.filter((function(e){return e.username===localStorage.getItem("username")})).map((function(e){return e.subject}));e.setState({subjects:a})})).catch((function(e){console.log(e)})),O.a.get("/api/dashboard/details",v).then((function(t){e.setState({details:t.data})})),O.a.get("/api/dashboard/img_data",v).then((function(t){var a=t.data;e.setState({photos:a})}))}},{key:"render",value:function(){var e=this,t=this.state.subjects.map((function(t){return Object(h.jsx)("tr",{onClick:e.subjectClicked,children:Object(h.jsx)("th",{children:t})},t)})),a=this.state.details.filter((function(t){return t.username===localStorage.getItem("username")&&t.subject===e.state.subjectClicked})),n=0,s=a.map((function(t){try{var a=e.state.photos,s=t.image,i=a.filter((function(e){return e._id===s})),c="data:image/jpeg;base64,"+e.arrayBufferToBase64(i[0].img.data.data)}catch(o){c=""}return n++,Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:n}),Object(h.jsx)("td",{children:t.date.substring(0,10)}),Object(h.jsx)("td",{children:t.description}),Object(h.jsxs)("td",{children:[Object(h.jsx)("a",{className:"lightbox",href:"#".concat(c),children:Object(h.jsx)("img",{src:c})}),Object(h.jsxs)("div",{className:"lightbox-target",id:c,children:[Object(h.jsx)("img",{src:c}),Object(h.jsx)("a",{className:"lightbox-close",href:"#"})]})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)(r.b,{to:"/detail/edit/"+t._id,children:"edit"}),"|",Object(h.jsx)("a",{href:"/dashboard",onClick:function(a){return e.deleteDetail(a,t._id,s)},children:"delete"})]})]},t._id)}));return Object(h.jsx)("div",{className:"container-fluid",children:Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-xs",children:Object(h.jsxs)("table",{className:"table",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:Object(h.jsx)("th",{scope:"col",children:"Subject"})})}),Object(h.jsxs)("tbody",{children:[t,Object(h.jsx)("tr",{children:Object(h.jsx)("th",{children:Object(h.jsx)(r.b,{to:"/subject/add",className:"nav-link",children:"+Subject"})})})]})]})}),Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("h1",{children:this.state.subjectClicked}),Object(h.jsxs)("table",{className:"table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"No."}),Object(h.jsxs)("th",{scope:"col",children:["Date",Object(h.jsx)("button",{onClick:function(t){return e.sort(t)},children:"\u2191\u2193"})]}),Object(h.jsx)("th",{scope:"col",children:"Description"}),Object(h.jsx)("th",{scope:"col",children:"Image"}),Object(h.jsx)("th",{scope:"col"})]})}),Object(h.jsxs)("tbody",{children:[s,Object(h.jsx)("tr",{children:Object(h.jsx)("th",{children:Object(h.jsx)(r.b,{to:"/detail/add",className:"nav-link",children:"+Detail"})})})]})]})]})]})})})}}]),a}(n.Component),C={headers:{"auth-token":localStorage.getItem("token")}},y=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={subject:""},n.onChangeSubject=n.onChangeSubject.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"onChangeSubject",value:function(e){this.setState({subject:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:localStorage.getItem("username"),subject:this.state.subject};O.a.post("/api/dashboard/subjects/add",t,C).then((function(e){return console.log(e.data)})),window.location="/dashboard"}},{key:"render",value:function(){var e=localStorage.getItem("username");return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New Subject"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("br",{}),Object(h.jsx)("h5",{children:e})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeSubject})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Create New Subject",className:"btn btn-primary"})})]})]})}}]),a}(n.Component),I=a(20),k=a.n(I),N=(a(28),{headers:{"auth-token":localStorage.getItem("token")}}),w=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={description:"",file:null,date:new Date,imageID:""},n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.onChangeImage=n.onChangeImage.bind(Object(u.a)(n)),n.onSubmitImage=n.onSubmitImage.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeImage",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onSubmitImage",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("file",this.state.file),O.a.post("/api/dashboard/img_data",a,N).then((function(e){return t.setState({imageID:e.data.new_img})})),document.getElementById("imageSubmitted").innerHTML="Photo has been submitted"}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:localStorage.getItem("username"),subject:localStorage.getItem("subject"),description:this.state.description,image:this.state.imageID,date:this.state.date};O.a.post("/api/dashboard/details/add/",t,N).then((function(e){return console.log(e.data)})),localStorage.removeItem("subject"),window.location="/dashboard"}},{key:"render",value:function(){var e=localStorage.getItem("username"),t=localStorage.getItem("subject");return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New Detail"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("h5",{children:e})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsx)("h5",{children:t})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image: "}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"myImage",onChange:this.onChangeImage}),Object(h.jsx)("button",{onClick:this.onSubmitImage,children:"Confirm Image"}),Object(h.jsx)("div",{children:Object(h.jsx)("label",{id:"imageSubmitted",style:{color:"green"}})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Date: "}),Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{selected:this.state.date,onChange:this.onChangeDate})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Add Detail",className:"btn btn-primary"})})]})]})}}]),a}(n.Component),D={headers:{"auth-token":localStorage.getItem("token")}},E=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:"",description:"",file:null,date:new Date,oldImageID:"",newImage:!1,newImageID:"",photos:[]},n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.onChangeImage=n.onChangeImage.bind(Object(u.a)(n)),n.onSubmitImage=n.onSubmitImage.bind(Object(u.a)(n)),n.changeImage=n.changeImage.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/dashboard/details/"+this.props.match.params.id,D).then((function(t){e.setState({id:t.data._id,description:t.data.description,date:new Date(t.data.date),oldImageID:t.data.image,newImageID:t.data.image})})),O.a.get("/api/dashboard/img_data",D).then((function(t){return e.setState({photos:t.data})}))}},{key:"changeImage",value:function(e){e.preventDefault(),alert("Once you click 'Confirm Image', you can't get back the previous image!"),this.setState({newImage:!0})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeImage",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onSubmitImage",value:function(e){var t=this;e.preventDefault(),this.state.oldImageID&&O.a.delete("/api/dashboard/img_data/"+this.state.oldImageID,D).then((function(e){return console.log(e)}));var a=new FormData;a.append("file",this.state.file),O.a.post("/api/dashboard/img_data",a,D).then((function(e){console.log(e.data.new_img),t.setState({newImageID:e.data.new_img})})),document.getElementById("imageSubmitted").innerHTML="Photo has been submitted"}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:localStorage.getItem("username"),subject:localStorage.getItem("subject"),description:this.state.description,image:this.state.newImageID,date:this.state.date};O.a.post("/api/dashboard/details/update/"+this.state.id,t,D).then((function(e){return console.log(e.data)})),localStorage.removeItem("subject"),window.location="/dashboard"}},{key:"render",value:function(){var e=this,t=localStorage.getItem("username"),a=localStorage.getItem("subject");try{var n=this.state.photos.filter((function(t){return t._id===e.state.oldImageID})),s="data:image/jpeg;base64,"+function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(n[0].img.data.data)}catch(c){s=""}var i=this.state.newImage?Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image: "}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"myImage",onChange:this.onChangeImage}),Object(h.jsx)("button",{onClick:this.onSubmitImage,children:"Confirm Image"}),Object(h.jsx)("div",{children:Object(h.jsx)("label",{id:"imageSubmitted",style:{color:"green"}})})]}):Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image"}),Object(h.jsx)("a",{className:"lightbox",href:"#".concat(s),children:Object(h.jsx)("img",{src:s})}),Object(h.jsxs)("div",{className:"lightbox-target",id:s,children:[Object(h.jsx)("img",{src:s}),Object(h.jsx)("a",{className:"lightbox-close",href:"#"})]}),Object(h.jsx)("div",{children:"Do you want to change the Image?"}),Object(h.jsx)("button",{onClick:this.changeImage,children:"Yes"})]});return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Update Detail"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("h5",{children:t})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsx)("h5",{children:a})]}),Object(h.jsx)("br",{}),i,Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Date: "}),Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{selected:this.state.date,onChange:this.onChangeDate})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})]}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Update Detail",className:"btn btn-primary"})})]})]})}}]),a}(n.Component),U=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeEmail=n.onChangeEmail.bind(Object(u.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n.state={users:[],pass:!1,email:"",password:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/admins").then((function(t){console.log(t.data);var a=t.data;e.setState({users:a})}))}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value}),this.state.users.map((function(e){return e.email})).includes(e.target.value)&&this.setState({pass:!0})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.pass){var a={email:this.state.email,password:this.state.password};O.a.get("/api/admins").then((function(e){var a=e.data.filter((function(e){return e.email===t.state.email}));localStorage.setItem("username",a[0].username)})),O.a.post("/api/admins/login",a).then((function(e){localStorage.setItem("token",e.data.token),window.location="/admin/dashboard"})).catch((function(e){document.getElementById("submit").innerHTML="Password is wrong."}))}else document.getElementById("submit").innerHTML="Email is wrong"}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("h3",{children:"Login Admin"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.email,onChange:this.onChangeEmail})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary"}),Object(h.jsx)("p",{id:"submit",style:{color:"red"}})]})]})]})}}]),a}(n.Component),_={headers:{"auth-token":localStorage.getItem("token")}},P=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[],subjects:[],details:[],photos:[]},n.updateState=n.updateState.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){e.setState({users:t.data})})),O.a.get("/api/dashboard/subjects",_).then((function(t){e.setState({subjects:t.data})})),O.a.get("/api/dashboard/details",_).then((function(t){e.setState({details:t.data})})),O.a.get("/api/dashboard/img_data",_).then((function(t){console.log(t.data),e.setState({photos:t.data})}))}},{key:"deleteDetail",value:function(e,t,a){e.preventDefault(),console.log(t,a)}},{key:"updateState",value:function(e,t){this.setState({details:this.state.details.filter((function(t){return t._id!==e})),photos:this.state.photos.filter((function(e){return e._id!==t}))})}},{key:"render",value:function(){var e=this.state.users,t=this.state.subjects,a=this.state.details,n=this.state.photos;function s(e){return a.filter((function(t){return t.username===e.user&&t.subject===e.subject})).map((function(e){try{var t=e.image,a=n.filter((function(e){return e._id===t})),s="data:image/jpeg;base64,"+function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(a[0].img.data.data)}catch(i){s=""}return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"w-25 p-3",children:e.description}),Object(h.jsx)("td",{className:"w-25 p-3",children:e.date.substring(0,10)}),Object(h.jsxs)("td",{className:"w-25 p-3",children:[Object(h.jsx)("a",{className:"lightbox",href:"#".concat(s),children:Object(h.jsx)("img",{src:s})}),Object(h.jsxs)("div",{className:"lightbox-target",id:s,children:[Object(h.jsx)("img",{src:s}),Object(h.jsx)("a",{className:"lightbox-close",href:"#"})]})]}),Object(h.jsxs)("td",{className:"w-25 p-3",children:[Object(h.jsx)(r.b,{to:"/admin/dashboard/detail/edit/"+e._id,children:"edit"}),"|",Object(h.jsx)("a",{href:"/admin/dashboard",onClick:function(a){return function(e,t,a){e.preventDefault(),O.a.delete("/dashboard/details/"+t,_).then((function(e){return console.log(e.data)})),O.a.delete("/dashboard/img_data/"+a,_).then((function(e){return console.log(e.data)})),alert("Detail has been deleted. Please refresh to update the dashboard."),document.getElementById("info").innerHTML="x"}(a,e._id,t)},children:"delete"}),"  ",Object(h.jsx)("a",{id:"info"})]})]},e._id)}))}function i(e){return t.filter((function(t){return t.username===e.user})).map((function(t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h5",{children:t.subject}),Object(h.jsx)("table",{className:"table",children:Object(h.jsx)("tbody",{children:Object(h.jsx)(s,{user:e.user,subject:t.subject})})}),Object(h.jsx)("br",{})]},t._id)}))}var c=e.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:e.username}),Object(h.jsx)(i,{user:e.username}),Object(h.jsx)("br",{})]},e.username)}));return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)(r.b,{to:"/admin/user/add",children:"+User"}),Object(h.jsx)(r.b,{to:"/admin/subject/add",children:"+Subject"}),Object(h.jsx)(r.b,{to:"/admin/detail/add",children:"+Detail"})]}),c]})}}]),a}(n.Component),M={headers:{"auth-token":localStorage.getItem("token")}},L=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:"",user:"",subject:"",description:"",file:null,date:new Date,oldImageID:"",newImage:!1,newImageID:"",photos:[]},n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.onChangeImage=n.onChangeImage.bind(Object(u.a)(n)),n.onSubmitImage=n.onSubmitImage.bind(Object(u.a)(n)),n.changeImage=n.changeImage.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/dashboard/details/"+this.props.match.params.id,M).then((function(t){e.setState({id:t.data._id,user:t.data.username,subject:t.data.subject,description:t.data.description,date:new Date(t.data.date),oldImageID:t.data.image,newImageID:t.data.image})})),O.a.get("/api/dashboard/img_data",M).then((function(t){return e.setState({photos:t.data})}))}},{key:"changeImage",value:function(e){e.preventDefault(),alert("Once you click 'Confirm Image', you can't get back the previous image!"),this.setState({newImage:!0})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeImage",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onSubmitImage",value:function(e){var t=this;e.preventDefault(),this.state.oldImageID&&O.a.delete("/api/dashboard/img_data/"+this.state.oldImageID,M).then((function(e){return console.log(e)}));var a=new FormData;a.append("file",this.state.file),O.a.post("/api/dashboard/img_data",a,M).then((function(e){t.setState({newImageID:e.data.new_img})})),document.getElementById("imageSubmitted").innerHTML="Photo has been submitted"}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.user,subject:this.state.subject,description:this.state.description,image:this.state.newImageID,date:this.state.date};O.a.post("/api/dashboard/details/update/"+this.state.id,t,M).then((function(e){return console.log(e.data)})),localStorage.removeItem("subject"),window.location="/admin/dashboard"}},{key:"render",value:function(){var e=this;try{var t=this.state.photos.filter((function(t){return t._id===e.state.oldImageID})),a="data:image/jpeg;base64,"+function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(t[0].img.data.data)}catch(s){a=""}var n=this.state.newImage?Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image: "}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"myImage",onChange:this.onChangeImage}),Object(h.jsx)("button",{onClick:this.onSubmitImage,children:"Confirm Image"}),Object(h.jsx)("div",{children:Object(h.jsx)("label",{id:"imageSubmitted",style:{color:"green"}})})]}):Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image"}),Object(h.jsx)("a",{className:"lightbox",href:"#".concat(a),children:Object(h.jsx)("img",{src:a})}),Object(h.jsxs)("div",{className:"lightbox-target",id:a,children:[Object(h.jsx)("img",{src:a}),Object(h.jsx)("a",{className:"lightbox-close",href:"#"})]}),Object(h.jsx)("div",{children:"Do you want to change the Image?"}),Object(h.jsx)("button",{onClick:this.changeImage,children:"Yes"})]});return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Update Detail"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("h5",{children:this.state.user})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsx)("h5",{children:this.state.subject})]}),Object(h.jsx)("br",{}),n,Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Date: "}),Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{selected:this.state.date,onChange:this.onChangeDate})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})]}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Update Detail",className:"btn btn-primary"})})]})]})}}]),a}(n.Component),B={headers:{"auth-token":localStorage.getItem("token")}},T=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[],username:"",email:"",password:"",pass:!1},n.onChangeUsername=n.onChangeUsername.bind(Object(u.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(u.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){var a=t.data;e.setState({users:a})}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value}),this.state.users.map((function(e){return e.email})).includes(e.target.value)?(this.setState({pass:!1}),document.getElementById("email").innerHTML=" \xd7 "):(this.setState({pass:!0}),document.getElementById("email").innerHTML="")}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.state.pass){var t={username:this.state.username,email:this.state.email,password:this.state.password};O.a.post("/api/users/add",t,B).then((function(e){return console.log(e.data)}))}else document.getElementById("submit").innerHTML="Email has been taken."}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New User"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email: "}),Object(h.jsx)("a",{id:"email",style:{color:"red"}}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.email,onChange:this.onChangeEmail})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{type:"submit",value:"Create New User",className:"btn btn-primary"}),Object(h.jsx)("p",{id:"submit",style:{color:"red"}})]})]})]})}}]),a}(n.Component),q={headers:{"auth-token":localStorage.getItem("token")}},H=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[],username:"",subject:""},n.onChangeUsername=n.onChangeUsername.bind(Object(u.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){return e.setState({users:t.data,username:t.data[0].username})}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeSubject",value:function(e){this.setState({subject:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,subject:this.state.subject};O.a.post("/api/dashboard/subjects/add",t,q).then((function(e){return console.log(e.data)})),window.location="/admin/dashboard"}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New Subject"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("br",{}),Object(h.jsx)("select",{required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername,children:this.state.users.map((function(e){return Object(h.jsx)("option",{value:e.username,children:e.username},e.username)}))})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeSubject})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Create New Subject",className:"btn btn-primary"})})]})]})}}]),a}(n.Component),A={headers:{"auth-token":localStorage.getItem("token")}},F=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:[],subjects:[],username:"",multipleSubject:[],subject:"",description:"",file:null,date:new Date,imageID:""},n.onChangeUsername=n.onChangeUsername.bind(Object(u.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(u.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.onChangeImage=n.onChangeImage.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onSubmitImage=n.onSubmitImage.bind(Object(u.a)(n)),n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/users").then((function(t){return e.setState({users:t.data,username:t.data[0].username})})),O.a.get("/api/dashboard/subjects",A).then((function(t){return e.setState({subjects:t.data})}))}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeSubject",value:function(e){this.setState({subject:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeImage",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onSubmitImage",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("file",this.state.file),O.a.post("/api/dashboard/img_data",a,A).then((function(e){return t.setState({imageID:e.data.new_img})})),document.getElementById("imageSubmitted").innerHTML="Photo has been submitted"}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,subject:this.state.subject,description:this.state.description,image:this.state.imageID,date:this.state.date};O.a.post("/api/dashboard/details/add/",t,A).then((function(e){return console.log(e.data)})),window.location="/admin/dashboard"}},{key:"render",value:function(){var e=this,t=this.state.subjects.filter((function(t){return t.username===e.state.username}));return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:"Create New Detail"}),Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("select",{required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUsername,children:this.state.users.map((function(e){return Object(h.jsx)("option",{value:e.username,children:e.username},e.username)}))})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Subject: "}),Object(h.jsxs)("select",{required:!0,className:"form-control",value:this.state.subject,onChange:this.onChangeSubject,children:[Object(h.jsx)("option",{}),t.map((function(e){return Object(h.jsx)("option",{value:e.subject,children:e.subject},e.subject)}))]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Image: "}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"myImage",onChange:this.onChangeImage}),Object(h.jsx)("button",{onClick:this.onSubmitImage,children:"Confirm Image"}),Object(h.jsx)("div",{children:Object(h.jsx)("label",{id:"imageSubmitted",style:{color:"green"}})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Date: "}),Object(h.jsx)("div",{children:Object(h.jsx)(k.a,{selected:this.state.date,onChange:this.onChangeDate})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Description: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.description,onChange:this.onChangeDescription})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"submit",value:"Add Detail",className:"btn btn-primary"})})]})]})}}]),a}(n.Component);var J=function(){return Object(h.jsx)(r.a,{children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)(m,{}),Object(h.jsx)("br",{}),Object(h.jsx)(o.a,{path:"/",exact:!0,component:p}),Object(h.jsx)(o.a,{path:"/user/create",component:x}),Object(h.jsx)(o.a,{path:"/dashboard",component:S}),Object(h.jsx)(o.a,{path:"/subject/add",component:y}),Object(h.jsx)(o.a,{path:"/detail/add",component:w}),Object(h.jsx)(o.a,{path:"/detail/edit/:id",component:E}),Object(h.jsx)(o.a,{path:"/admin",exact:!0,component:U}),Object(h.jsx)(o.a,{path:"/admin/dashboard",exact:!0,component:P}),Object(h.jsx)(o.a,{path:"/admin/dashboard/detail/edit/:id",component:L}),Object(h.jsx)(o.a,{path:"/admin/user/add",component:T}),Object(h.jsx)(o.a,{path:"/admin/subject/add",component:H}),Object(h.jsx)(o.a,{path:"/admin/detail/add",component:F})]})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,200)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};c.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(J,{})}),document.getElementById("root")),Y()},34:function(e,t,a){},88:function(e,t,a){}},[[198,1,2]]]);
//# sourceMappingURL=main.e2992080.chunk.js.map