{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem('token');var header={headers:{'auth-token':token}};var CreateDetail=/*#__PURE__*/function(_Component){_inherits(CreateDetail,_Component);var _super=_createSuper(CreateDetail);function CreateDetail(props){var _this;_classCallCheck(this,CreateDetail);_this=_super.call(this,props);_this.state={users:[],subjects:[],username:'',multipleSubject:[],subject:'',description:'',file:null,date:new Date(),imageID:''};_this.onChangeUsername=_this.onChangeUsername.bind(_assertThisInitialized(_this));_this.onChangeSubject=_this.onChangeSubject.bind(_assertThisInitialized(_this));_this.onChangeDescription=_this.onChangeDescription.bind(_assertThisInitialized(_this));_this.onChangeImage=_this.onChangeImage.bind(_assertThisInitialized(_this));_this.onChangeDate=_this.onChangeDate.bind(_assertThisInitialized(_this));_this.onSubmitImage=_this.onSubmitImage.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/users').then(function(res){return _this2.setState({users:res.data,username:res.data[0].username});});axios.get('/api/dashboard/subjects',header).then(function(res){return _this2.setState({subjects:res.data});});}},{key:\"onChangeUsername\",value:function onChangeUsername(e){this.setState({username:e.target.value});}},{key:\"onChangeSubject\",value:function onChangeSubject(e){this.setState({subject:e.target.value});}},{key:\"onChangeDescription\",value:function onChangeDescription(e){this.setState({description:e.target.value});}},{key:\"onChangeDate\",value:function onChangeDate(date){this.setState({date:date});}},{key:\"onChangeImage\",value:function onChangeImage(e){this.setState({file:e.target.files[0]});}},{key:\"onSubmitImage\",value:function onSubmitImage(e){var _this3=this;e.preventDefault();var image=new FormData();image.append('file',this.state.file);axios.post('/api/dashboard/img_data',image,header).then(function(res){return _this3.setState({imageID:res.data.new_img});});document.getElementById('imageSubmitted').innerHTML=\"Photo has been submitted\";}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var detail={username:this.state.username,subject:this.state.subject,description:this.state.description,image:this.state.imageID,date:this.state.date};axios.post('/api/dashboard/details/add/',detail,header).then(function(res){return console.log(res.data);});window.location='/admin/dashboard';}},{key:\"render\",value:function render(){var _this4=this;var filteredSubject=this.state.subjects.filter(function(user){return user.username===_this4.state.username;});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Detail\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"select\",{required:true,className:\"form-control\",value:this.state.username,onChange:this.onChangeUsername,children:this.state.users.map(function(user){return/*#__PURE__*/_jsx(\"option\",{value:user.username,children:user.username},user.username);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subject: \"}),/*#__PURE__*/_jsxs(\"select\",{required:true,className:\"form-control\",value:this.state.subject,onChange:this.onChangeSubject,children:[/*#__PURE__*/_jsx(\"option\",{}),filteredSubject.map(function(user){return/*#__PURE__*/_jsx(\"option\",{value:user.subject,children:user.subject},user.subject);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"myImage\",onChange:this.onChangeImage}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onSubmitImage,children:\"Confirm Image\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{id:\"imageSubmitted\",style:{color:\"green\"}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date: \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DatePicker,{selected:this.state.date,onChange:this.onChangeDate})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,className:\"form-control\",value:this.state.description,onChange:this.onChangeDescription})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Add Detail\",className:\"btn btn-primary\"})})]})]});}}]);return CreateDetail;}(Component);export{CreateDetail as default};","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/admin-create-detail.component.js"],"names":["React","Component","DatePicker","axios","token","localStorage","getItem","header","headers","CreateDetail","props","state","users","subjects","username","multipleSubject","subject","description","file","date","Date","imageID","onChangeUsername","bind","onChangeSubject","onChangeDescription","onChangeImage","onChangeDate","onSubmitImage","onSubmit","get","then","res","setState","data","e","target","value","files","preventDefault","image","FormData","append","post","new_img","document","getElementById","innerHTML","detail","console","log","window","location","filteredSubject","filter","user","map","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport axios from 'axios';\r\n\r\nconst token = localStorage.getItem('token');\r\nconst header = { headers: {'auth-token': token} }\r\n\r\nexport default class CreateDetail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            subjects: [],\r\n            username: '',\r\n            multipleSubject: [],\r\n            subject: '',\r\n            description: '',\r\n            file: null,\r\n            date: new Date(),\r\n            imageID: ''\r\n        }\r\n        this.onChangeUsername = this.onChangeUsername.bind(this);\r\n        this.onChangeSubject = this.onChangeSubject.bind(this);\r\n        this.onChangeDescription = this.onChangeDescription.bind(this);\r\n        this.onChangeImage = this.onChangeImage.bind(this);\r\n        this.onChangeDate = this.onChangeDate.bind(this);\r\n        this.onSubmitImage = this.onSubmitImage.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('/api/users')\r\n            .then(res => this.setState({ users: res.data, username: res.data[0].username }))\r\n\r\n        axios.get('/api/dashboard/subjects', header)\r\n            .then(res => this.setState({ subjects: res.data }))\r\n    }\r\n\r\n    onChangeUsername(e) {\r\n        this.setState({ username: e.target.value })\r\n    }\r\n\r\n    onChangeSubject(e) {\r\n      this.setState({ subject: e.target.value })\r\n    }\r\n\r\n    onChangeDescription(e) {\r\n      this.setState({ description: e.target.value})\r\n    }\r\n\r\n    onChangeDate(date) {\r\n        this.setState({ date })\r\n    }\r\n\r\n    onChangeImage(e){\r\n      this.setState({ file: e.target.files[0] })\r\n    }\r\n\r\n    onSubmitImage(e){\r\n      e.preventDefault();\r\n\r\n      const image = new FormData();\r\n      image.append('file', this.state.file);\r\n\r\n      axios.post('/api/dashboard/img_data', image, header)\r\n        .then(res => this.setState({ imageID: res.data.new_img }))\r\n\r\n      document.getElementById('imageSubmitted').innerHTML = \"Photo has been submitted\"\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const detail = {\r\n          username: this.state.username,\r\n          subject: this.state.subject,\r\n          description: this.state.description,\r\n          image: this.state.imageID,\r\n          date: this.state.date\r\n        };\r\n\r\n        axios.post('/api/dashboard/details/add/', detail, header)\r\n            .then(res => console.log(res.data))\r\n\r\n        window.location = '/admin/dashboard';\r\n    }\r\n\r\n    render() {\r\n        const filteredSubject = this.state.subjects.filter((user) => \r\n          user.username === this.state.username)\r\n\r\n        return (\r\n            <div className='container'>\r\n            <h3>Create New Detail</h3>\r\n            <form onSubmit={this.onSubmit}>\r\n              <div className=\"form-group\"> \r\n                <label>Username: </label>\r\n                <select\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.username}\r\n                    onChange={this.onChangeUsername}>\r\n                    {this.state.users.map((user) => {\r\n                        return <option\r\n                            key={user.username}\r\n                            value={user.username}>{user.username}\r\n                            </option>\r\n                    })\r\n                    }\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Subject: </label>\r\n                <select\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.subject}\r\n                    onChange={this.onChangeSubject}>\r\n                    <option></option>\r\n                    {filteredSubject\r\n                    .map((user) => {\r\n                        return (\r\n                          <option\r\n                            key={user.subject}\r\n                            value={user.subject}>{user.subject}\r\n                          </option>\r\n                        )\r\n                    })}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Image: </label>\r\n                <br />\r\n                <input type=\"file\" name=\"myImage\" onChange= {this.onChangeImage} />\r\n                <button onClick={this.onSubmitImage}>Confirm Image</button>\r\n                <div>\r\n                  <label id=\"imageSubmitted\" style={{color: \"green\"}}></label>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Date: </label>\r\n                <div>\r\n                  <DatePicker\r\n                    selected={this.state.date}\r\n                    onChange={this.onChangeDate}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Description: </label>\r\n                <input  type=\"text\"\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.description}\r\n                    onChange={this.onChangeDescription}\r\n                    />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <input type=\"submit\" value=\"Add Detail\" className=\"btn btn-primary\" />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}