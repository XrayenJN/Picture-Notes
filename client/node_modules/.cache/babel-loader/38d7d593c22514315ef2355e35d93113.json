{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem('token');var header={headers:{'auth-token':token}};var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.state={subjects:[],subjectClicked:'',details:[],sorted:false,photo:[]};_this.subjectClicked=_this.subjectClicked.bind(_assertThisInitialized(_this));_this.sort=_this.sort.bind(_assertThisInitialized(_this));return _this;}_createClass(Dashboard,[{key:\"arrayBufferToBase64\",value:function arrayBufferToBase64(buffer){var binary='';var bytes=[].slice.call(new Uint8Array(buffer));bytes.forEach(function(b){return binary+=String.fromCharCode(b);});return window.btoa(binary);}},{key:\"subjectClicked\",value:function subjectClicked(e){this.setState({subjectClicked:e.target.innerText});localStorage.setItem(\"subject\",e.target.innerText);}},{key:\"deleteDetail\",value:function deleteDetail(e,id,imgID){e.preventDefault();axios.delete('/api/dashboard/details/'+id,header).then(function(res){return console.log(res.data);});axios.delete('/api/dashboard/img_data/'+imgID,header).then(function(res){return console.log(res.data);});this.setState({details:this.state.details.filter(function(each){return each._id!==id;}),photo:this.state.photo.filter(function(each){return each._id!==imgID;})});}},{key:\"sort\",value:function sort(e){var _this2=this;var sorted=this.state.details.sort(function(first,second){if(_this2.state.sorted===true){if(first.date>second.date)return 1;return-1;}else{if(first.date>second.date)return-1;return 1;}});this.setState({details:sorted,sorted:!this.state.sorted});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;axios.get('/api/dashboard/subjects',header).then(function(response){var subjects=response.data.filter(function(each){return each.username===localStorage.getItem('username');});var subject=subjects.map(function(each){return each.subject;});_this3.setState({subjects:subject});}).catch(function(error){console.log(error);});axios.get('/api/dashboard/details',header).then(function(res){_this3.setState({details:res.data});});axios.get('/api/dashboard/img_data',header).then(function(res){var photos=res.data;_this3.setState({photos:photos});});}},{key:\"render\",value:function render(){var _this4=this;var subjects=this.state.subjects;var listSubjects=subjects.map(function(subject){return/*#__PURE__*/_jsx(\"tr\",{onClick:_this4.subjectClicked,children:/*#__PURE__*/_jsx(\"th\",{children:subject})},subject);});var details=this.state.details;var sortedDetails=details.filter(function(each){return each.username===localStorage.getItem('username')&&each.subject===_this4.state.subjectClicked;});var number=0;var listDetails=sortedDetails.map(function(detail){try{var photos=_this4.state.photos;var imageID=detail.image;var image=photos.filter(function(each){return each._id===imageID;});var base64Flag='data:image/jpeg;base64,';var imageStr=_this4.arrayBufferToBase64(image[0].img.data.data);var actualImage=base64Flag+imageStr;}catch(_unused){actualImage='';}number++;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:number}),/*#__PURE__*/_jsx(\"td\",{children:detail.date.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:detail.description}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"lightbox\",href:\"#\".concat(actualImage),children:/*#__PURE__*/_jsx(\"img\",{src:actualImage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-target\",id:actualImage,children:[/*#__PURE__*/_jsx(\"img\",{src:actualImage}),/*#__PURE__*/_jsx(\"a\",{className:\"lightbox-close\",href:\"#\"})]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/detail/edit/\"+detail._id,children:\"edit\"}),\"|\",/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",onClick:function onClick(e){return _this4.deleteDetail(e,detail._id,imageID);},children:\"delete\"})]})]},detail._id);});return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xs\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Subject\"})})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[listSubjects,/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Link,{to:\"/subject/add\",className:\"nav-link\",children:\"+Subject\"})})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h1\",{children:this.state.subjectClicked}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"No.\"}),/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[\"Date\",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return _this4.sort(e);},children:\"\\u2191\\u2193\"})]}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[listDetails,/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Link,{to:\"/detail/add\",className:\"nav-link\",children:\"+Detail\"})})})]})]})]})]})})});}}]);return Dashboard;}(Component);export{Dashboard as default};","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/dashboard.component.js"],"names":["React","Component","axios","Link","token","localStorage","getItem","header","headers","Dashboard","props","state","subjects","subjectClicked","details","sorted","photo","bind","sort","buffer","binary","bytes","slice","call","Uint8Array","forEach","b","String","fromCharCode","window","btoa","e","setState","target","innerText","setItem","id","imgID","preventDefault","delete","then","res","console","log","data","filter","each","_id","first","second","date","get","response","username","subject","map","catch","error","photos","listSubjects","sortedDetails","number","listDetails","detail","imageID","image","base64Flag","imageStr","arrayBufferToBase64","img","actualImage","substring","description","deleteDetail"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst token = localStorage.getItem('token');\r\nconst header = { headers: {'auth-token': token} }\r\n\r\nexport default class Dashboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            subjects: [],\r\n            subjectClicked: '',\r\n            details: [],\r\n            sorted: false,\r\n            photo: [],\r\n        };\r\n\r\n        this.subjectClicked = this.subjectClicked.bind(this)\r\n        this.sort = this.sort.bind(this);\r\n    }\r\n\r\n    arrayBufferToBase64(buffer) {\r\n        var binary = '';\r\n        var bytes = [].slice.call(new Uint8Array(buffer));\r\n        bytes.forEach((b) => binary += String.fromCharCode(b));\r\n        return window.btoa(binary);\r\n    };\r\n\r\n    subjectClicked(e) {\r\n        this.setState({subjectClicked: e.target.innerText})\r\n        localStorage.setItem(\"subject\", e.target.innerText)\r\n    }\r\n\r\n    deleteDetail(e, id, imgID) {\r\n        e.preventDefault();\r\n\r\n        axios.delete('/api/dashboard/details/' + id, header)\r\n            .then(res => console.log(res.data))\r\n\r\n        axios.delete('/api/dashboard/img_data/' + imgID, header)\r\n            .then(res => console.log(res.data));\r\n\r\n        this.setState({\r\n            details: this.state.details.filter(each => each._id !== id),\r\n            photo: this.state.photo.filter(each => each._id !== imgID)\r\n        })\r\n    }\r\n\r\n    sort(e){\r\n        const sorted = this.state.details.sort((first, second) => {\r\n            if (this.state.sorted === true) {\r\n                if (first.date > second.date) return 1\r\n                    return -1\r\n            } else {if (first.date > second.date) return -1\r\n                    return 1\r\n            }\r\n        })\r\n        this.setState({ details: sorted, sorted: !this.state.sorted });\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('/api/dashboard/subjects', header)\r\n          .then(response => {\r\n            const subjects = response.data.filter(each => \r\n                each.username === localStorage.getItem('username')\r\n            )\r\n            const subject = subjects.map(each => each.subject)\r\n            this.setState({ subjects: subject})\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          })\r\n\r\n        axios.get('/api/dashboard/details', header)\r\n            .then(res => {\r\n                this.setState({ details: res.data })\r\n            })\r\n\r\n        axios.get('/api/dashboard/img_data', header)\r\n            .then(res => {\r\n                const photos = res.data;\r\n                this.setState({ photos })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const subjects = this.state.subjects\r\n        const listSubjects = subjects.map(subject => \r\n            <tr key={subject} onClick={this.subjectClicked}>\r\n                <th>{subject}</th>\r\n            </tr>\r\n            )\r\n\r\n        var details = this.state.details\r\n        var sortedDetails = details.filter(each => \r\n            each.username === localStorage.getItem('username')\r\n            && each.subject === this.state.subjectClicked\r\n            );\r\n\r\n        var number = 0;\r\n        var listDetails = sortedDetails.map(detail => {\r\n            try {\r\n                const photos = this.state.photos\r\n                var imageID = detail.image\r\n                const image = photos.filter(each => each._id === imageID)\r\n                const base64Flag = 'data:image/jpeg;base64,';\r\n                const imageStr = this.arrayBufferToBase64(image[0].img.data.data)\r\n                var actualImage = base64Flag + imageStr\r\n            }\r\n            catch{\r\n                actualImage = '';\r\n            }\r\n            number++;\r\n            return(\r\n                <tr key={detail._id}>\r\n                    <td>{number}</td>\r\n                    <td>{detail.date.substring(0,10)}</td>\r\n                    <td>{detail.description}</td>\r\n                    <td>\r\n                        <a className=\"lightbox\" href={`#${actualImage}`}>\r\n                            <img src={actualImage}/>\r\n                        </a> \r\n                        <div className=\"lightbox-target\" id={actualImage}>\r\n                            <img src={actualImage}/>\r\n                            <a className=\"lightbox-close\" href=\"#\" />\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <Link to={\"/detail/edit/\"+detail._id}>edit</Link> \r\n                        | \r\n                        <a href=\"/dashboard\" onClick={(e) => this.deleteDetail(e, detail._id, imageID)}>delete</a>\r\n                    </td>\r\n                </tr>\r\n            )\r\n        })\r\n        return (\r\n            <div className='container-fluid'>\r\n                <div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-xs\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Subject</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {listSubjects}\r\n                                    <tr>\r\n                                        <th><Link to=\"/subject/add\" className=\"nav-link\">+Subject</Link></th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                            <h1>{this.state.subjectClicked}</h1>\r\n                            <table className='table'>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope='col'>No.</th>\r\n                                        <th scope='col'>Date<button onClick={(e) => this.sort(e)}>↑↓</button></th>\r\n                                        <th scope='col'>Description</th>\r\n                                        <th scope='col'>Image</th>\r\n                                        <th scope=\"col\"></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {listDetails}\r\n                                    <tr>\r\n                                        <th><Link to=\"/detail/add\" className=\"nav-link\">+Detail</Link></th>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}