{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jonathan\\\\Desktop\\\\MERNstack\\\\project\\\\Picture-Notes\\\\client\\\\src\\\\components\\\\homepage.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class LoginUser extends Component {\n  constructor(props) {\n    super(props);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.state = {\n      users: [],\n      pass: false,\n      email: '',\n      password: ''\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"/api/users\").then(res => {\n      const users = res.data;\n      this.setState({\n        users\n      });\n    });\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n    const emails = this.state.users.map(user => user.email);\n    if (emails.includes(e.target.value)) this.setState({\n      pass: true\n    });\n  }\n\n  onChangePassword(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.pass) {\n      const User = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      axios.get('/api/users').then(res => {\n        const user = res.data.filter(user => user.email === this.state.email);\n        localStorage.setItem('username', user[0].username);\n      });\n      axios.post('/api/users/login', User).then(res => {\n        localStorage.setItem(\"token\", res.data.token);\n        window.location = '/dashboard';\n      }).catch(err => {\n        document.getElementById(\"submit\").innerHTML = \"Password is wrong.\";\n      });\n    } else {\n      document.getElementById('submit').innerHTML = \"Email is wrong\";\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            required: true,\n            className: \"form-control\",\n            value: this.state.email,\n            onChange: this.onChangeEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            required: true,\n            className: \"form-control\",\n            value: this.state.password,\n            onChange: this.onChangePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Login\",\n            className: \"btn btn-primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"submit\",\n            style: {\n              color: \"red\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/homepage.component.js"],"names":["React","Component","axios","LoginUser","constructor","props","onChangeEmail","bind","onChangePassword","onSubmit","state","users","pass","email","password","componentDidMount","get","then","res","data","setState","e","target","value","emails","map","user","includes","preventDefault","User","filter","localStorage","setItem","username","post","token","window","location","catch","err","document","getElementById","innerHTML","render","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport \"../App.css\"\r\n\r\nexport default class LoginUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onChangeEmail = this.onChangeEmail.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n\r\n        this.state = {\r\n            users: [],\r\n            pass: false,\r\n            email: '',\r\n            password: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/users\")\r\n            .then(res => {\r\n                const users = res.data\r\n                this.setState({ users })\r\n            })\r\n    }\r\n\r\n    onChangeEmail(e) {\r\n        this.setState({\r\n            email: e.target.value\r\n        })\r\n\r\n        const emails = this.state.users.map(user => user.email)\r\n        if (emails.includes(e.target.value))\r\n            this.setState({ pass: true })\r\n    }\r\n\r\n    onChangePassword(e){\r\n        this.setState({\r\n            password: e.target.value\r\n        })\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if(this.state.pass){\r\n            const User = {\r\n                email: this.state.email,\r\n                password: this.state.password\r\n            }\r\n    \r\n            axios.get('/api/users')\r\n            .then(res => {\r\n                const user = res.data.filter(user => user.email === this.state.email)\r\n                localStorage.setItem('username', user[0].username)\r\n            })\r\n    \r\n            axios.post('/api/users/login', User)\r\n                .then(res => {\r\n                    localStorage.setItem(\"token\", res.data.token)\r\n                    window.location = '/dashboard'\r\n                })\r\n                .catch(err => {\r\n                    document.getElementById(\"submit\").innerHTML = \"Password is wrong.\"\r\n                })\r\n        }\r\n        else {\r\n            document.getElementById('submit').innerHTML = \"Email is wrong\";\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h3>Login</h3>\r\n                <form onSubmit={this.onSubmit}>\r\n                <div className=\"form-group\"> \r\n                    <label>Email: </label>\r\n                    <input  type=\"text\"\r\n                        required\r\n                        className=\"form-control\"\r\n                        value={this.state.email}\r\n                        onChange={this.onChangeEmail}\r\n                        />\r\n                </div>\r\n                <div className=\"form-group\"> \r\n                    <label>Password: </label>\r\n                    <input  type=\"password\"\r\n                        required\r\n                        className=\"form-control\"\r\n                        value={this.state.password}\r\n                        onChange={this.onChangePassword}\r\n                        />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\r\n                    <p id=\"submit\" style={{color: \"red\"}}></p>\r\n                </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}