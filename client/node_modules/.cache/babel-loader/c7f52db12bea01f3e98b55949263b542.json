{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem('token');var header={headers:{'auth-token':token}};var CreateDetail=/*#__PURE__*/function(_Component){_inherits(CreateDetail,_Component);var _super=_createSuper(CreateDetail);function CreateDetail(props){var _this;_classCallCheck(this,CreateDetail);_this=_super.call(this,props);_this.state={description:'',file:null,date:new Date(),imageID:''};_this.onChangeDescription=_this.onChangeDescription.bind(_assertThisInitialized(_this));_this.onChangeImage=_this.onChangeImage.bind(_assertThisInitialized(_this));_this.onSubmitImage=_this.onSubmitImage.bind(_assertThisInitialized(_this));_this.onChangeDate=_this.onChangeDate.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateDetail,[{key:\"onChangeDescription\",value:function onChangeDescription(e){this.setState({description:e.target.value});}},{key:\"onChangeDate\",value:function onChangeDate(date){this.setState({date:date});}},{key:\"onChangeImage\",value:function onChangeImage(e){this.setState({file:e.target.files[0]});}},{key:\"onSubmitImage\",value:function onSubmitImage(e){var _this2=this;e.preventDefault();var image=new FormData();image.append('file',this.state.file);axios.post('/api/dashboard/img_data',image,header).then(function(res){return _this2.setState({imageID:res.data.new_img});});document.getElementById('imageSubmitted').innerHTML=\"Photo has been submitted\";}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var detail={username:localStorage.getItem('username'),subject:localStorage.getItem('subject'),description:this.state.description,image:this.state.imageID,date:this.state.date};axios.post('/api/dashboard/details/add/',detail,header).then(function(res){return console.log(res.data);});localStorage.removeItem('subject');window.location='/dashboard';}},{key:\"render\",value:function render(){var username=localStorage.getItem('username');var subject=localStorage.getItem('subject');return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Detail\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"h5\",{children:username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subject: \"}),/*#__PURE__*/_jsx(\"h5\",{children:subject})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"myImage\",onChange:this.onChangeImage}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onSubmitImage,children:\"Confirm Image\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{id:\"imageSubmitted\",style:{color:\"green\"}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date: \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DatePicker,{selected:this.state.date,onChange:this.onChangeDate})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,className:\"form-control\",value:this.state.description,onChange:this.onChangeDescription})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Add Detail\",className:\"btn btn-primary\"})})]})]});}}]);return CreateDetail;}(Component);export{CreateDetail as default};","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/create-detail.component.js"],"names":["React","Component","DatePicker","axios","token","localStorage","getItem","header","headers","CreateDetail","props","state","description","file","date","Date","imageID","onChangeDescription","bind","onChangeImage","onSubmitImage","onChangeDate","onSubmit","e","setState","target","value","files","preventDefault","image","FormData","append","post","then","res","data","new_img","document","getElementById","innerHTML","detail","username","subject","console","log","removeItem","window","location","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport axios from 'axios';\r\n\r\nconst token = localStorage.getItem('token');\r\nconst header = { headers: {'auth-token': token} }\r\n\r\nexport default class CreateDetail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            description: '',\r\n            file: null,\r\n            date: new Date(),\r\n            imageID: ''\r\n        }\r\n        this.onChangeDescription = this.onChangeDescription.bind(this);\r\n        this.onChangeImage = this.onChangeImage.bind(this);\r\n        this.onSubmitImage = this.onSubmitImage.bind(this);\r\n        this.onChangeDate = this.onChangeDate.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n\r\n    onChangeDescription(e) {\r\n      this.setState({ description: e.target.value})\r\n    }\r\n\r\n    onChangeDate(date) {\r\n        this.setState({ date })\r\n    }\r\n\r\n    onChangeImage(e){\r\n      this.setState({ file: e.target.files[0] })\r\n    }\r\n\r\n    onSubmitImage(e){\r\n      e.preventDefault();\r\n\r\n      const image = new FormData();\r\n      image.append('file', this.state.file);\r\n\r\n      axios.post('/api/dashboard/img_data', image, header)\r\n        .then(res => this.setState({ imageID: res.data.new_img }))\r\n\r\n      document.getElementById('imageSubmitted').innerHTML = \"Photo has been submitted\"\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const detail = {\r\n          username: localStorage.getItem('username'),\r\n          subject: localStorage.getItem('subject'),\r\n          description: this.state.description,\r\n          image: this.state.imageID,\r\n          date: this.state.date\r\n        };\r\n\r\n        axios.post('/api/dashboard/details/add/', detail, header)\r\n            .then(res => console.log(res.data))\r\n\r\n        localStorage.removeItem('subject');\r\n        window.location = '/dashboard';\r\n    }\r\n\r\n    render() {\r\n        const username = localStorage.getItem('username')\r\n        const subject = localStorage.getItem('subject');\r\n        return (\r\n            <div className='container'>\r\n            <h3>Create New Detail</h3>\r\n            <form onSubmit={this.onSubmit}>\r\n              <div className=\"form-group\"> \r\n                <label>Username: </label>\r\n                <h5>{username}</h5>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Subject: </label>\r\n                <h5>{subject}</h5>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Image: </label>\r\n                <br />\r\n                <input type=\"file\" name=\"myImage\" onChange= {this.onChangeImage} />\r\n                <button onClick={this.onSubmitImage}>Confirm Image</button>\r\n                <div>\r\n                  <label id=\"imageSubmitted\"  style={{color: \"green\"}}></label>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Date: </label>\r\n                <div>\r\n                  <DatePicker\r\n                    selected={this.state.date}\r\n                    onChange={this.onChangeDate}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\"> \r\n                <label>Description: </label>\r\n                <input  type=\"text\"\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.description}\r\n                    onChange={this.onChangeDescription}\r\n                    />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <input type=\"submit\" value=\"Add Detail\" className=\"btn btn-primary\" />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}