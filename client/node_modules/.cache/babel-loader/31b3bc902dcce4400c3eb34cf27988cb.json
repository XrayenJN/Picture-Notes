{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem('token');var header={headers:{'auth-token':token}};var EditDetail=/*#__PURE__*/function(_Component){_inherits(EditDetail,_Component);var _super=_createSuper(EditDetail);function EditDetail(props){var _this;_classCallCheck(this,EditDetail);_this=_super.call(this,props);_this.state={id:'',user:'',subject:'',description:'',file:null,date:new Date(),oldImageID:'',newImage:false,newImageID:'',photos:[]};_this.onChangeDescription=_this.onChangeDescription.bind(_assertThisInitialized(_this));_this.onChangeImage=_this.onChangeImage.bind(_assertThisInitialized(_this));_this.onSubmitImage=_this.onSubmitImage.bind(_assertThisInitialized(_this));_this.changeImage=_this.changeImage.bind(_assertThisInitialized(_this));_this.onChangeDate=_this.onChangeDate.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(EditDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/dashboard/details/'+this.props.match.params.id,header).then(function(res){_this2.setState({id:res.data._id,user:res.data.username,subject:res.data.subject,description:res.data.description,date:new Date(res.data.date),oldImageID:res.data.image,newImageID:res.data.image});});axios.get('/api/dashboard/img_data',header).then(function(res){return _this2.setState({photos:res.data});});}},{key:\"changeImage\",value:function changeImage(e){e.preventDefault();alert('Once you click \\'Confirm Image\\', you can\\'t get back the previous image!');this.setState({newImage:true});}},{key:\"onChangeDescription\",value:function onChangeDescription(e){this.setState({description:e.target.value});}},{key:\"onChangeDate\",value:function onChangeDate(date){this.setState({date:date});}},{key:\"onChangeImage\",value:function onChangeImage(e){this.setState({file:e.target.files[0]});}},{key:\"onSubmitImage\",value:function onSubmitImage(e){var _this3=this;e.preventDefault();if(this.state.oldImageID)axios.delete('/api/dashboard/img_data/'+this.state.oldImageID,header).then(function(res){return console.log(res);});var image=new FormData();image.append('file',this.state.file);axios.post('/api/dashboard/img_data',image,header).then(function(res){_this3.setState({newImageID:res.data.new_img});});document.getElementById('imageSubmitted').innerHTML=\"Photo has been submitted\";}},{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();var detail={username:this.state.user,subject:this.state.subject,description:this.state.description,image:this.state.newImageID,date:this.state.date};axios.post('/api/dashboard/details/update/'+this.state.id,detail,header).then(function(res){return console.log(res.data);});localStorage.removeItem('subject');window.location='/admin/dashboard';}},{key:\"render\",value:function render(){var _this4=this;function arrayBufferToBase64(buffer){var binary='';var bytes=[].slice.call(new Uint8Array(buffer));bytes.forEach(function(b){return binary+=String.fromCharCode(b);});return window.btoa(binary);};try{var image=this.state.photos.filter(function(img){return img._id===_this4.state.oldImageID;});var base64Flag='data:image/jpeg;base64,';var imageStr=arrayBufferToBase64(image[0].img.data.data);var actualImage=base64Flag+imageStr;}catch(_unused){actualImage='';}var changeImage=this.state.newImage?/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"myImage\",onChange:this.onChangeImage}),/*#__PURE__*/_jsx(\"button\",{onClick:this.onSubmitImage,children:\"Confirm Image\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{id:\"imageSubmitted\",style:{color:\"green\"}})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"a\",{className:\"lightbox\",href:\"#\".concat(actualImage),children:/*#__PURE__*/_jsx(\"img\",{src:actualImage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lightbox-target\",id:actualImage,children:[/*#__PURE__*/_jsx(\"img\",{src:actualImage}),/*#__PURE__*/_jsx(\"a\",{className:\"lightbox-close\",href:\"#\"})]}),/*#__PURE__*/_jsx(\"div\",{children:\"Do you want to change the Image?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.changeImage,children:\"Yes\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update Detail\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"h5\",{children:this.state.user})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subject: \"}),/*#__PURE__*/_jsx(\"h5\",{children:this.state.subject})]}),/*#__PURE__*/_jsx(\"br\",{}),changeImage,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date: \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DatePicker,{selected:this.state.date,onChange:this.onChangeDate})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,className:\"form-control\",value:this.state.description,onChange:this.onChangeDescription})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Detail\",className:\"btn btn-primary\"})})]})]});}}]);return EditDetail;}(Component);export{EditDetail as default};","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/admin-edit-detail.component.js"],"names":["React","Component","DatePicker","axios","token","localStorage","getItem","header","headers","EditDetail","props","state","id","user","subject","description","file","date","Date","oldImageID","newImage","newImageID","photos","onChangeDescription","bind","onChangeImage","onSubmitImage","changeImage","onChangeDate","onSubmit","get","match","params","then","res","setState","data","_id","username","image","e","preventDefault","alert","target","value","files","delete","console","log","FormData","append","post","new_img","document","getElementById","innerHTML","detail","removeItem","window","location","arrayBufferToBase64","buffer","binary","bytes","slice","call","Uint8Array","forEach","b","String","fromCharCode","btoa","filter","img","base64Flag","imageStr","actualImage","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport axios from 'axios';\r\n\r\nconst token = localStorage.getItem('token');\r\nconst header = { headers: {'auth-token': token} }\r\n\r\nexport default class EditDetail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            id: '',\r\n            user: '',\r\n            subject: '',\r\n            description: '',\r\n            file: null,\r\n            date: new Date(),\r\n            oldImageID: '',\r\n            newImage: false,\r\n            newImageID: '',\r\n            photos: []\r\n        }\r\n        this.onChangeDescription = this.onChangeDescription.bind(this);\r\n        this.onChangeImage = this.onChangeImage.bind(this);\r\n        this.onSubmitImage = this.onSubmitImage.bind(this);\r\n        this.changeImage = this.changeImage.bind(this);\r\n        this.onChangeDate = this.onChangeDate.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n      axios.get('/api/dashboard/details/' + this.props.match.params.id, header)\r\n        .then(res => {\r\n          this.setState({\r\n            id: res.data._id,\r\n            user: res.data.username,\r\n            subject: res.data.subject,\r\n            description: res.data.description,\r\n            date: new Date(res.data.date),\r\n            oldImageID: res.data.image,\r\n            newImageID: res.data.image\r\n          })\r\n        })\r\n\r\n      axios.get('/api/dashboard/img_data', header)\r\n        .then(res => this.setState({ photos: res.data }))\r\n    }\r\n\r\n    changeImage(e){\r\n      e.preventDefault();\r\n      alert('Once you click \\'Confirm Image\\', you can\\'t get back the previous image!');\r\n      this.setState({ newImage: true })\r\n    }\r\n\r\n    onChangeDescription(e) {\r\n      this.setState({ description: e.target.value})\r\n    }\r\n\r\n    onChangeDate(date) {\r\n        this.setState({ date })\r\n    }\r\n\r\n    onChangeImage(e){\r\n      this.setState({ file: e.target.files[0] })\r\n    }\r\n\r\n    onSubmitImage(e){\r\n      e.preventDefault();\r\n\r\n      if(this.state.oldImageID)\r\n        axios.delete('/api/dashboard/img_data/' + this.state.oldImageID, header)\r\n          .then(res => console.log(res))\r\n\r\n      const image = new FormData();\r\n      image.append('file', this.state.file);\r\n\r\n      axios.post('/api/dashboard/img_data', image, header)\r\n        .then(res => {\r\n          this.setState({ newImageID: res.data.new_img })\r\n        })\r\n\r\n      document.getElementById('imageSubmitted').innerHTML = \"Photo has been submitted\"\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const detail = {\r\n          username: this.state.user,\r\n          subject: this.state.subject,\r\n          description: this.state.description,\r\n          image: this.state.newImageID,\r\n          date: this.state.date\r\n        };\r\n\r\n        axios.post('/api/dashboard/details/update/' + this.state.id, detail, header)\r\n            .then(res => console.log(res.data))\r\n\r\n        localStorage.removeItem('subject');\r\n        window.location = '/admin/dashboard';\r\n    }\r\n\r\n    render() {\r\n        function arrayBufferToBase64(buffer) {\r\n          var binary = '';\r\n          var bytes = [].slice.call(new Uint8Array(buffer));\r\n          bytes.forEach((b) => binary += String.fromCharCode(b));\r\n          return window.btoa(binary);\r\n        };\r\n\r\n        try{\r\n          const image = this.state.photos.filter(img => img._id === this.state.oldImageID)\r\n          const base64Flag = 'data:image/jpeg;base64,';\r\n          const imageStr = arrayBufferToBase64(image[0].img.data.data)\r\n          var actualImage = base64Flag + imageStr\r\n        }\r\n        catch{\r\n            actualImage = '';\r\n        }\r\n\r\n        const changeImage = (this.state.newImage)\r\n          ? <div className=\"form-group\"> \r\n              <label>Image: </label>\r\n              <br />\r\n              <input type=\"file\" name=\"myImage\" onChange= {this.onChangeImage} />\r\n              <button onClick={this.onSubmitImage}>Confirm Image</button>\r\n              <div>\r\n                <label id=\"imageSubmitted\" style={{color: \"green\"}}></label>\r\n              </div>\r\n            </div>\r\n          : <div className=\"form-group\"> \r\n              <label>Image</label>\r\n              <a className=\"lightbox\" href={`#${actualImage}`}>\r\n                <img src={actualImage}/>\r\n              </a> \r\n              <div className=\"lightbox-target\" id={actualImage}>\r\n                <img src={actualImage}/>\r\n                <a className=\"lightbox-close\" href=\"#\" />\r\n              </div>\r\n              <div>Do you want to change the Image?</div>\r\n              <button onClick={this.changeImage}>Yes</button>\r\n            </div>\r\n        return (\r\n          <div className='container'>\r\n            <h3>Update Detail</h3>\r\n            <form onSubmit={this.onSubmit}>\r\n              <div className=\"form-group\"> \r\n                <label>Username: </label>\r\n                <h5>{this.state.user}</h5>\r\n              </div>\r\n              <br />\r\n              <div className=\"form-group\"> \r\n                <label>Subject: </label>\r\n                <h5>{this.state.subject}</h5>\r\n              </div>\r\n              <br />\r\n              {changeImage}\r\n              <br />\r\n              <div className=\"form-group\">\r\n                <label>Date: </label>\r\n                <div>\r\n                  <DatePicker\r\n                    selected={this.state.date}\r\n                    onChange={this.onChangeDate}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <div className=\"form-group\"> \r\n                <label>Description: </label>\r\n                <input  type=\"text\"\r\n                    required\r\n                    className=\"form-control\"\r\n                    value={this.state.description}\r\n                    onChange={this.onChangeDescription}\r\n                    />\r\n              </div>\r\n              <br />\r\n              <div className=\"form-group\">\r\n                <input type=\"submit\" value=\"Update Detail\" className=\"btn btn-primary\" />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}