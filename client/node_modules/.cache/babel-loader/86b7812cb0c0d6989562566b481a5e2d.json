{"ast":null,"code":"import _classCallCheck from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminLogin=/*#__PURE__*/function(_Component){_inherits(AdminLogin,_Component);var _super=_createSuper(AdminLogin);function AdminLogin(props){var _this;_classCallCheck(this,AdminLogin);_this=_super.call(this,props);_this.onChangeEmail=_this.onChangeEmail.bind(_assertThisInitialized(_this));_this.onChangePassword=_this.onChangePassword.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.state={users:[],pass:false,email:'',password:''};return _this;}_createClass(AdminLogin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"/api/admins\").then(function(res){console.log(res.data);var users=res.data;_this2.setState({users:users});});}},{key:\"onChangeEmail\",value:function onChangeEmail(e){this.setState({email:e.target.value});var emails=this.state.users.map(function(user){return user.email;});if(emails.includes(e.target.value))this.setState({pass:true});}},{key:\"onChangePassword\",value:function onChangePassword(e){this.setState({password:e.target.value});}},{key:\"onSubmit\",value:function onSubmit(e){var _this3=this;e.preventDefault();if(this.state.pass){var Admin={email:this.state.email,password:this.state.password};axios.get('/api/admins').then(function(res){var admin=res.data.filter(function(admin){return admin.email===_this3.state.email;});localStorage.setItem('username',admin[0].username);});axios.post('/api/admins/login',Admin).then(function(res){localStorage.setItem(\"token\",res.data.token);window.location='/admin/dashboard';}).catch(function(err){document.getElementById(\"submit\").innerHTML=\"Password is wrong.\";});}else{document.getElementById('submit').innerHTML=\"Email is wrong\";}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login Admin\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,className:\"form-control\",value:this.state.email,onChange:this.onChangeEmail})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,className:\"form-control\",value:this.state.password,onChange:this.onChangePassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary\"}),/*#__PURE__*/_jsx(\"p\",{id:\"submit\",style:{color:\"red\"}})]})]})]});}}]);return AdminLogin;}(Component);export{AdminLogin as default};","map":{"version":3,"sources":["C:/Users/Jonathan/Desktop/MERNstack/project/Picture-Notes/client/src/components/admin-login.component.js"],"names":["React","Component","axios","AdminLogin","props","onChangeEmail","bind","onChangePassword","onSubmit","state","users","pass","email","password","get","then","res","console","log","data","setState","e","target","value","emails","map","user","includes","preventDefault","Admin","admin","filter","localStorage","setItem","username","post","token","window","location","catch","err","document","getElementById","innerHTML","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport \"../App.css\"\r\n\r\nexport default class AdminLogin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onChangeEmail = this.onChangeEmail.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n\r\n        this.state = {\r\n            users: [],\r\n            pass: false,\r\n            email: '',\r\n            password: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/admins\")\r\n            .then(res => {\r\n                console.log(res.data)\r\n                const users = res.data\r\n                this.setState({ users })\r\n            })\r\n    }\r\n\r\n    onChangeEmail(e) {\r\n        this.setState({\r\n            email: e.target.value\r\n        })\r\n\r\n        const emails = this.state.users.map(user => user.email)\r\n        if (emails.includes(e.target.value))\r\n            this.setState({ pass: true })\r\n    }\r\n\r\n    onChangePassword(e){\r\n        this.setState({\r\n            password: e.target.value\r\n        })\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        if(this.state.pass){\r\n            const Admin = {\r\n                email: this.state.email,\r\n                password: this.state.password\r\n            }\r\n    \r\n            axios.get('/api/admins')\r\n            .then(res => {\r\n                const admin = res.data.filter(admin => admin.email === this.state.email)\r\n                localStorage.setItem('username', admin[0].username)\r\n            })\r\n    \r\n            axios.post('/api/admins/login', Admin)\r\n                .then(res => {\r\n                    localStorage.setItem(\"token\", res.data.token)\r\n                    window.location = '/admin/dashboard'\r\n                })\r\n                .catch(err => {\r\n                    document.getElementById(\"submit\").innerHTML = \"Password is wrong.\"\r\n                })\r\n        }\r\n        else {\r\n            document.getElementById('submit').innerHTML = \"Email is wrong\";\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <h3>Login Admin</h3>\r\n                <form onSubmit={this.onSubmit}>\r\n                <div className=\"form-group\"> \r\n                    <label>Email: </label>\r\n                    <input  type=\"text\"\r\n                        required\r\n                        className=\"form-control\"\r\n                        value={this.state.email}\r\n                        onChange={this.onChangeEmail}\r\n                        />\r\n                </div>\r\n                <div className=\"form-group\"> \r\n                    <label>Password: </label>\r\n                    <input  type=\"password\"\r\n                        required\r\n                        className=\"form-control\"\r\n                        value={this.state.password}\r\n                        onChange={this.onChangePassword}\r\n                        />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <input type=\"submit\" value=\"Login\" className=\"btn btn-primary\" />\r\n                    <p id=\"submit\" style={{color: \"red\"}}></p>\r\n                </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}